package subdomains

import "strings"

var LocaleCodes = map[string]struct{}{
	"af":         {},
	"af-ZA":      {},
	"sq":         {},
	"sq-AL":      {},
	"ar":         {},
	"ar-DZ":      {},
	"ar-BH":      {},
	"ar-EG":      {},
	"ar-IQ":      {},
	"ar-JO":      {},
	"ar-KW":      {},
	"ar-LB":      {},
	"ar-LY":      {},
	"ar-MA":      {},
	"ar-OM":      {},
	"ar-QA":      {},
	"ar-SA":      {},
	"ar-SY":      {},
	"ar-TN":      {},
	"ar-AE":      {},
	"ar-YE":      {},
	"hy":         {},
	"hy-AM":      {},
	"az":         {},
	"az-AZ-Cyrl": {},
	"az-AZ-Latn": {},
	"eu":         {},
	"eu-ES":      {},
	"be":         {},
	"be-BY":      {},
	"bg":         {},
	"bg-BG":      {},
	"ca":         {},
	"ca-ES":      {},
	"zh-HK":      {},
	"zh-MO":      {},
	"zh-CN":      {},
	"zh-CHS":     {},
	"zh-SG":      {},
	"zh-TW":      {},
	"zh-CHT":     {},
	"hr":         {},
	"hr-HR":      {},
	"cs":         {},
	"cs-CZ":      {},
	"da":         {},
	"da-DK":      {},
	"div":        {},
	"div-MV":     {},
	"nl":         {},
	"nl-BE":      {},
	"nl-NL":      {},
	"en":         {},
	"en-AU":      {},
	"en-BZ":      {},
	"en-CA":      {},
	"en-CB":      {},
	"en-IE":      {},
	"en-JM":      {},
	"en-NZ":      {},
	"en-PH":      {},
	"en-ZA":      {},
	"en-TT":      {},
	"en-GB":      {},
	"en-US":      {},
	"en-ZW":      {},
	"et":         {},
	"et-EE":      {},
	"fo":         {},
	"fo-FO":      {},
	"fa":         {},
	"fa-IR":      {},
	"fi":         {},
	"fi-FI":      {},
	"fr":         {},
	"fr-BE":      {},
	"fr-CA":      {},
	"fr-FR":      {},
	"fr-LU":      {},
	"fr-MC":      {},
	"fr-CH":      {},
	"gl":         {},
	"gl-ES":      {},
	"ka":         {},
	"ka-GE":      {},
	"de":         {},
	"de-AT":      {},
	"de-DE":      {},
	"de-LI":      {},
	"de-LU":      {},
	"de-CH":      {},
	"el":         {},
	"el-GR":      {},
	"gu":         {},
	"gu-IN":      {},
	"he":         {},
	"he-IL":      {},
	"hi":         {},
	"hi-IN":      {},
	"hu":         {},
	"hu-HU":      {},
	"is":         {},
	"is-IS":      {},
	"id":         {},
	"id-ID":      {},
	"it":         {},
	"it-IT":      {},
	"it-CH":      {},
	"ja":         {},
	"ja-JP":      {},
	"kn":         {},
	"kn-IN":      {},
	"kk":         {},
	"kk-KZ":      {},
	"kok":        {},
	"kok-IN":     {},
	"ko":         {},
	"ko-KR":      {},
	"ky":         {},
	"ky-KZ":      {},
	"lv":         {},
	"lv-LV":      {},
	"lt":         {},
	"lt-LT":      {},
	"mk":         {},
	"mk-MK":      {},
	"ms":         {},
	"ms-BN":      {},
	"ms-MY":      {},
	"mr":         {},
	"mr-IN":      {},
	"mn":         {},
	"mn-MN":      {},
	"no":         {},
	"nb-NO":      {},
	"nn-NO":      {},
	"pl":         {},
	"pl-PL":      {},
	"pt":         {},
	"pt-BR":      {},
	"pt-PT":      {},
	"pa":         {},
	"pa-IN":      {},
	"ro":         {},
	"ro-RO":      {},
	"ru":         {},
	"ru-RU":      {},
	"sa":         {},
	"sa-IN":      {},
	"sr-SP-Cyrl": {},
	"sr-SP-Latn": {},
	"sk":         {},
	"sk-SK":      {},
	"sl":         {},
	"sl-SI":      {},
	"es":         {},
	"es-AR":      {},
	"es-BO":      {},
	"es-CL":      {},
	"es-CO":      {},
	"es-CR":      {},
	"es-DO":      {},
	"es-EC":      {},
	"es-SV":      {},
	"es-GT":      {},
	"es-HN":      {},
	"es-MX":      {},
	"es-NI":      {},
	"es-PA":      {},
	"es-PY":      {},
	"es-PE":      {},
	"es-PR":      {},
	"es-ES":      {},
	"es-UY":      {},
	"es-VE":      {},
	"sw":         {},
	"sw-KE":      {},
	"sv":         {},
	"sv-FI":      {},
	"sv-SE":      {},
	"syr":        {},
	"syr-SY":     {},
	"ta":         {},
	"ta-IN":      {},
	"tt":         {},
	"tt-RU":      {},
	"te":         {},
	"te-IN":      {},
	"th":         {},
	"th-TH":      {},
	"tr":         {},
	"tr-TR":      {},
	"uk":         {},
	"uk-UA":      {},
	"ur":         {},
	"ur-PK":      {},
	"uz":         {},
	"uz-UZ-Cyrl": {},
	"uz-UZ-Latn": {},
	"vi":         {},
	"vi-VN":      {},
	"cy":         {},
	"cy-GB":      {},
	"xh":         {},
	"xh-ZA":      {},
	"zu":         {},
	"zu-ZA":      {},
}

func FixLocalePath(upath string) (string, bool) {
	cleaned := strings.TrimPrefix(upath, `/`) // /en/abc => /abc
	arr := strings.SplitN(cleaned, `/`, 2)
	if len(arr) == 2 {
		locale := arr[0]
		if _, ok := LocaleCodes[locale]; ok {
			return `/` + arr[1], true
		}
	}
	return upath, false
}
